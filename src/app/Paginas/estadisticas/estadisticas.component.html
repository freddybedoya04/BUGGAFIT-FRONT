<div class="Filtro">
    <p>
        <label>Fecha Inicio:</label>
        <p-calendar [(ngModel)]="FechaInicio" name="FechaInicio" [showTime]="true" hourFormat="12"
            [showIcon]="true"></p-calendar>
    </p>
    <p>
        <label>Fecha Fin:</label>
        <p-calendar [(ngModel)]="FechaFin" name="FechaFin" [showTime]="true" hourFormat="12"
            [showIcon]="true"></p-calendar>
    </p>
    <p>
        <p-button label="Buscar" icon="pi pi-search" style="margin-top: 20px;"
            (click)="calcularIndicadores()"></p-button>

    </p>
</div>

<div class="Indicadores">

    <div class="p-card" style="border-left: 5px solid #38722cfd;">
        <i class="pi pi-money-bill" style="background-color: #38722cfd;"></i>
        <h3 class="Titulo3"> Deudas</h3>
        <span class="value">{{ Indicadores.Deudas | currency: 'USD' }}</span>


    </div>
    <div class="p-card" style="border-left: 5px solid #6f00ff;">
        <i class="pi pi-shopping-bag" style="background-color: #6f00ff;"></i>
        <h3 class="Titulo3"> Ventas </h3>
        <span class="value">{{ Indicadores.Ventas | currency: 'USD' }}</span>
    </div>
    <div class="p-card" style="border-left: 5px solid #00aeff;">
        <i class="pi pi-wallet" style="background-color: #00aeff;"></i>
        <h3 class="Titulo3"> Gastos</h3>
        <span class="value">{{ Indicadores.Gastos | currency: 'USD' }}</span>
    </div>
    <div class="p-card" style="border-left: 5px solid #ff5d00;">
        <i class="pi 
        pi-shopping-cart" style="background-color: #ff5d00;"></i>
        <h3 class="Titulo3"> Compras</h3>
        <span class="value">{{ Indicadores.Compras | currency: 'USD' }}</span>
    </div>
    <div class="p-card" style="border-left: 5px solid #ff0055;">
        <i class="pi pi-credit-card" style="background-color: #ff0055;"></i>
        <h3 class="Titulo3"> Inventario</h3>
        <span class="value">{{Indicadores.Inventario | currency :'USD'}}</span>
    </div>
    <div class="p-card" style="border-left: 5px solid #ffc400;">
        <i class="pi pi-dollar" style="background-color: #ffc400;"></i>
        <h3 class="Titulo3"> Utilidades</h3>
        <span class="value">{{ Indicadores.Utilidades | currency: 'USD' }}</span>
    </div>
    <div class="p-card" style="border-left: 5px solid #00c3ff;">
        <i class="pi pi-dollar" style="background-color: #00c3ff;"></i>
        <h3 class="Titulo3"> Utilidades Netas</h3>
        <span class="value">{{ Indicadores.UtilidadesNeta | currency: 'USD' }}</span>
    </div>
    <div class="p-card" style="border-left: 5px solid #b3ff00;">
        <i class="pi pi-credit-card" style="background-color: #b3ff00;"></i>
        <h3 class="Titulo3"> Credito</h3>
        <span class="value">{{Indicadores.Creditos | currency :'USD'}}</span>
    </div>
</div>
<div class="Graficas">
    <p-card header="Cuentas" [style]="{padding: '20px' }" styleClass="shadow-5">
        <p-table [value]="Tabla"
        [tableStyle]="{ 'min-width': '20rem', 'max-height': '400px' }" [paginator]="true" [rows]="5"
        [showCurrentPageReport]="true" [currentPageReportTemplate]="'Mostrando {first} al {last} de {totalRecords}'"
        [scrollable]="true" [rowsPerPageOptions]="[5, 10]" styleClass="p-datatable-sm" class="custom-table">
        <ng-template pTemplate="header">
            <tr>
                <th style="width: 20%">Nombre</th>
                <th style="width: 20%">Ingresos</th>
                <th style="width: 20%">Compras</th>
                <th style="width: 20%">Gastos</th>
                <th style="width: 20%">total</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-cuenta>
            <tr>
                <td>{{ cuenta.Nombre}}</td>
                <td>{{ cuenta.IngresosTotales |number}}</td>
                <td>{{ cuenta.ComprasTotales |number}}</td>
                <td>{{ cuenta.GastosTotales |number}}</td>
                <td [ngClass]="{ 'texto-verde': cuenta.Saldo > 0, 'texto-rojo': cuenta.Saldo < 0 }">
                    {{ cuenta.Saldo |number}}
                </td>
            </tr>
        </ng-template>
    </p-table>
    </p-card>
    <p-card header="Productos Vendidos" [style]="{padding: '20px' }" styleClass="shadow-5">
        <p-table #dt2 [value]="this.Indicadores.ProductosVendidos"
            [tableStyle]="{ 'min-width': '20rem', 'max-height': '400px' }" [paginator]="true" [rows]="5"
            [showCurrentPageReport]="true" [currentPageReportTemplate]="'Mostrando {first} al {last} de {totalRecords}'"
            [scrollable]="true" [rowsPerPageOptions]="[5, 10]" 
            [globalFilterFields]="['Codigo','Nombre']"
            styleClass="p-datatable-sm" class="custom-table">
            <ng-template pTemplate="header">
                <div class="EncabezadoTabla">
               
            <span class="p-input-icon-left ml-auto">
                <i class="pi pi-search"></i>
                <input pInputText type="text" [(ngModel)]="searchKeyword"
                    (input)="dt2.filterGlobal(searchKeyword, 'contains')" placeholder="Buscar" />
            </span>
            <button pButton label="" icon="pi pi-filter" pTooltip="Quitar filtro" tooltipPosition="top"
            iconPos="left" class="p-button-raised p-button-rounded" (click)="searchKeyword='';dt2.reset()"></button>
        </div>
                <tr>
                    <th pSortableColumn="Nombre" style="width: 15%">
                        Nombre <p-sortIcon field="Nombre"></p-sortIcon>
                       </th>
                    <th pSortableColumn="Codigo" style="width: 15%">
                     Codigo <p-sortIcon field="Codigo"></p-sortIcon>
                    </th>
                    <th pSortableColumn="Precio" style="width: 15%">
                        Precio <p-sortIcon field="Precio"></p-sortIcon>
                       </th>
                       <th pSortableColumn="CantidadProducto" style="width: 25%">
                        Unidades Vendidas <p-sortIcon field="CantidadProducto"></p-sortIcon>
                       </th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-producto>
                <tr>
                    <td>{{ producto.Nombre}}</td>
                    <td>{{ producto.Codigo}}</td>
                    <td>{{ producto.Precio | currency}}</td>
                    <td>{{ producto.CantidadProducto}}</td>

                </tr>
            </ng-template>
        </p-table>
    </p-card>

</div>
